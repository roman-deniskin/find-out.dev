# Документация

### Приложение

#### Установка с нуля

* Открываем консоль, переходим в папку со всеми доменами. OpenServer: `cd domains`

* `git clone https://github.com/roman-deniskin/find-out.dev.git find-out.dev`

* `cd find-out.dev`

* `composer install`

* `php artisan vendor:publish`

* `php artisan key:generate`

* Создаем базу данных и прописываем данные для подключения в файле .env (см.п. Настройка)

* Выполняем комманду миграций: `php artisan module:migrate`

#### Настройка

* Указать в настройках сервера директорию проекта public

* Скопировать файл .env.example в корневую директорию и переименовать в .env

* В файле .env прописать данные для соединения с базой данных

#### Обновление

(если у вас уже есть установленный проект и его нужно обновить до актуальной версии)
Открываем консоль, переходим в папку с проектом (`cd domains/find-out.dev`)

* `git pull origin master` -- обновляемся до стабильной версии

Если эта команда вызывает ошибки то скорее всего вы сделали какие то изменения,
нужно либо сбросить их, либо сделать коммит

Сбросить -- только если вы не сделали ничего важного, все ваши изменения будут потеряны:
`git reset` и дальше по плану `git pull origin master`

Закоммитить изменения:
`git status` -- проверяем на какой мы ветке (в начале должно написать On branch {ВЕТКА} )
и какие файлы изменены

Если изменения вами оттестированы то можете заливать коммит в ветку master,
а потом делать пулл реквест в главный репозиторий, если же нет,
то лучше переключится на какую то другую ветку
git checkout -b {НАЗВАНИЕ_ВЕТКИ}

-- Латинскими буквами, без пробелов

Когда разобрались с веткой можно приступить к сохранению изменений:

* `git add ./` - добавляет всё изменения в коммит

* `git commit -m "{Укажите комментарий, опишите что вы сделали в 2х словах}"`

* `git push origin {НАЗВАНИЕ_ВЕТКИ}`

ну и вводим логин и пароль, всё, изменения сохранены, можем спокойно делать `git pull origin master`

После того как git нам стянул последнюю стабильную версию проекта делаем следующее:

* `composer install`

* `php artisan vendor:publish`

* `composer dump-autoload`

* `php artisan module:migrate`

На этом обновление завершено.

### Модули

#### Создание

-Будет сгенерирован модуль Blog:

`php artisan module:make Blog`

-Будут сгенерированы 3 модуля с соответствующими названиями:

`php artisan module:make Blog Portfolio User`

#### Публикация
В composer.json должны быть строки:

```
	"psr-4": {
            "App\\": "app/",
            "Modules\\": "Modules"
        }
```

Если их нет - следует обновиться до последней версии репозитория так как автозагрузка модулей не будет работать.

После создания модуля его нужно опубликовать командой:

`composer dump-autoload`

#### Миграции в модулях

`php artisan module:make-migration <MigrationName> <ModuleName>`

Например:

`php artisan module:make-migration create_table_users user`

##### Выполнить миграцию:

`php artisan module:migrate`

---------------------------------------

Полная документация по модулях есть на [оффициальном сайте пакета](http://sky.pingpong-labs.com/docs/2.0/modules)

### Работа с изображениями

Мы используем [ImageManager](https://github.com/anakadote/ImageManager-for-Laravel-5)
